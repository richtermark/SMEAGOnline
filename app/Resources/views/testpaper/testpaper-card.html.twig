{% set questionTypeDict = getQuestionTypes() %}
{% if testpaperActivity.limitedTime|default(0) > 0 and showTimer|default(1)  %}
	<div class="testpaper-timer">
		<span class="pull-left">{{'倒计时'|trans}}：</span><span class="timer js-testpaper-timer" data-time="{{ limitedTime }}">00:00:00</span>
		<a class="btn-pause js-btn-pause" href="javascript:;">
			<i class="es-icon es-icon-zanting pause"></i>
			<i class="es-icon es-icon-bofang play"></i>
		</a>
	</div>
{% endif %}

<div class="panel panel-default">
	<div class="panel-heading">
		{{'答题卡'|trans}}
		{% if target|default(null) and target.doTimes|default('0') %}
			<span class="color-danger">{{'本次考试仅一次机会'|trans}}</span>
		{% endif %}
		<a class="pull-right link-medium" href="javascript:;" data-container="body" data-toggle="popover" data-placement="bottom" data-trigger="hover" data-content='<div>本次考试共<span class="color-primary">{{ paper.itemCount }}题</span>，总分<span class="color-primary">{{ paper.score }}分</span>
		{% if testpaperActivity.finishCondition.type|default(null) == 'score' %}
			，及格为<span class="color-primary">{{ testpaperActivity.finishCondition.finishScore|default(0) }}</span>分
		{% endif %}。
		{% if testpaperActivity.limitedTime|default(0) > 0 %}请在<span class="color-primary">{{ testpaperActivity.limitedTime|default(0) }}分钟</span>内作答。
		{% endif %}</div>'><i class="es-icon es-icon-info"></i></a>
	</div>
	<div class="panel-body">
		<div class="js-panel-card panel-card">
		{% for type in questionTypes|default([]) if questions[type]|default(null) %}
			<p>{{ questionTypeDict[type] }}</p>
			{% for question in questions[type]|default(null) %}
				{% if question.type == 'material' %}
					{% for subQuestion in question.subs|default([]) %}
						{% include 'testpaper/part/paper-card-choice.html.twig' with {paperResult:paperResult,question:subQuestion,seq:(question.seq + loop.index - 1)} %}
					{% endfor %}
				{% else %}
					{% include 'testpaper/part/paper-card-choice.html.twig' with {paperResult:paperResult,question:question,seq:question.seq} %}
				{% endif %}
			{% endfor %}
		{% endfor %}
		</div>
	</div>
	<div class="panel-footer text-right">
		{% if paperResult.id|default(0) > 0 %}
			<input type="hidden" data-url="{{ path('testpaper_do_suspend', {resultId:paperResult.id}) }}" data-role="test-suspend">

			<button class="btn btn-primary do-test" id="finishPaper" data-ajax="{{ path('testpaper_result_submit', { resultId: paperResult.id|default(0) }) }}"  data-toggle="modal" data-target="#testpaper-finished-dialog">{{'马上交卷'|trans}}</button>
		{% else %}
			<button class="btn btn-primary" disabled="disabled">{{'马上交卷'|trans}}</button>
		{% endif %}
	</div>
</div>