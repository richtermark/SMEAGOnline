webpackJsonp(["app/js/settings/avatar-crop-modal/index"],[function(t,a,e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,a){for(var e=0;e<a.length;e++){var r=a[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(a,e,r){return e&&t(a.prototype,e),r&&t(a,r),a}}(),i=e("12695715cd021610570e"),s=r(i),u=e("b334fd7e4c5a19234db2"),c=r(u),l=function(){function t(a){n(this,t),this.element=a.element,this.avatarCrop=a.avatarCrop,this.saveBtn=a.saveBtn,this.init()}return o(t,[{key:"init",value:function(){var t=this.imageCrop();this.initEvent(t)}},{key:"initEvent",value:function(t){$(this.saveBtn).on("click",function(a){a.stopPropagation();var e=$(a.currentTarget);t.crop({imgs:{large:[200,200],medium:[120,120],small:[48,48]}}),e.button("loading")})}},{key:"imageCrop",value:function t(){var a=this,t=new s.default({element:this.avatarCrop,cropedWidth:200,cropedHeight:200});return t.afterCrop=function(t){var e=$(a.saveBtn),r=e.data("url");$.post(r,{images:t},function(t){"success"===t.status?($("#profile_avatar").val(t.avatar),$("#user-profile-form img").attr("src",t.avatar),$("#profile_avatar").blur(),$("#modal").modal("hide"),(0,c.default)("success",Translator.trans("上传成功"))):((0,c.default)("danger",Translator.trans("上传失败,请重试")),e.button("reset"))})},t}}]),t}();new l({element:"#avatar-crop-form",avatarCrop:"#avatar-crop",saveBtn:"#upload-avatar-btn"})}]);