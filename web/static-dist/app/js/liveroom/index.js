webpackJsonp(["app/js/liveroom/index"],[function(r,e){"use strict";function a(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}var t=function(){function r(r,e){for(var a=0;a<e.length;a++){var t=e[a];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}return function(e,a,t){return a&&r(e.prototype,a),t&&r(e,t),e}}(),n=function(){function r(){a(this,r),this.init()}return t(r,[{key:"init",value:function(){var r=this;this.isLiveRoomOpened=!1;var e=0,a=1;e=setInterval(function(){if(a>10){clearInterval(e);var t=Translator.trans("进入直播教室错误，请联系管理员，")+"<a href='javascript:document.location.reload()'>"+Translator.trans("重试")+"</a>"+Translator.trans("或")+"<a href='javascript:window.close();'>"+Translator.trans("关闭")+"</a>";return void $("#entry").html(t)}$.ajax({url:$("#entry").data("url"),success:function(t){if(t.error){clearInterval(e);var n=t.error+Translator.trans("，")+"<a href='javascript:document.location.reload()'>"+Translator.trans("重试")+"</a>或<a href='javascript:window.close();'>"+Translator.trans("关闭")+"</a>";return void $("#entry").html(n)}if(t.roomUrl){clearInterval(e),r.isLiveRoomOpened=!0;var o='<iframe name="classroom" src="'+t.roomUrl+'" style="position:absolute; left:0; top:0; height:100%; width:100%; border:0px;" scrolling="no"></iframe>';$("body").html(o)}a++},error:function(){var r="进入直播教室错误，请联系管理员，<a href='javascript:document.location.reload()'>重试</a>或<a href='javascript:window.close();'>关闭</a>";$("#entry").html(r)}})},3e3),this.triggerLiveEvent()}},{key:"triggerLiveEvent",value:function(){var r=this,e=null,a=setInterval(function(){r.isLiveRoomOpened&&0!=$('meta[name="trigger_url"]').length&&(e=e?"doing":"start",$.ajax({url:$('meta[name="trigger_url"]').attr("content"),type:"GET",data:{eventName:e},success:function(r){r.live_end&&clearInterval(a)}}))},6e4)}}]),r}();new n}]);