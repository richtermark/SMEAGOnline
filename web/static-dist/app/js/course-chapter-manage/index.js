webpackJsonp(["app/js/course-chapter-manage/index"],[function(e,a,t){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var n=t("b334fd7e4c5a19234db2"),r=s(n);$("#chapter-title-field").on("keypress",function(e){13===(e.keyCode||e.which)&&e.preventDefault()});var i=function(e){var a=e.sortable("serialize").get();$.post(e.data("sortUrl"),{ids:a},function(a){var t=0,s=0,n=0;e.find(".task-manage-unit, .task-manage-chapter").each(function(){var e=$(this);e.hasClass("item-lesson")?(t++,e.find(".number").text(t)):e.hasClass("task-manage-unit")?(n++,e.find(".number").text(n)):e.hasClass("task-manage-chapter")&&(s++,n=0,e.find(".number").text(s))})})};$("#course-chapter-btn").on("click",function(){var e=$(this),a=$("#course-chapter-form");a.validate({rules:{title:"required"},ajax:!0,currentDom:e,submitSuccess:function(t){e.closest(".modal").modal("hide"),$(".js-task-empty").hasClass("hidden")||$(".js-task-empty").addClass("hidden");var s=$("#"+$(t).attr("id"));if(s.length)s.replaceWith(t),(0,r.default)("success",Translator.trans("信息已保存"));else{var n=$("#"+a.data("parentid"));if(n.length){var l=0;n.nextAll().each(function(){if($(this).hasClass("task-manage-chapter"))return $(this).before(t),l=1,!1}),1!=l&&$("#sortable-list").append(t)}else $("#sortable-list").append(t);var c=$("#sortable-list");i(c)}}})})}]);